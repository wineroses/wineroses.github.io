<head>
<title>Obsidian Location</title>
</head>
<body>
<script>
function success(position) {
  var latitude = position.coords.latitude
  var longitude = position.coords.longitude
  var content = `---\ncoordinates: \n - "${latitude}"\n  - "${longitude}"\nicon: "landmark"\ncolor: "red"\ntags:\n  - places\n---\n`
}

function error(error) {
  var errorMessage = `エラーコード: ${error.code}\nエラーメッセージ: ${error.message}`
  alert(errorMessage)
}

navigator.geolocation.getCurrentPosition(success, error)

obsidian.onclick =()=>{
  url = `obsidian://new?name=location&content=${encodeURIComponent(content)}`
  window.open(url)
}
</script>

<div id="obsidian">Obsidian</div>
</body>
